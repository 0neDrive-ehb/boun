<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bouncing Ball</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }

    #square {
      position: relative;
      width: 300px;
      height: 300px;
      border: 2px solid #000;
      margin: 50px auto;
    }

    #ball {
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: hsl(0, 100%, 50%);
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3), 0 5px 10px rgba(0, 0, 0, 0.2);
    }

    .trail {
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      opacity: 0.5;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3), 0 5px 10px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>
<body>
  <div id="square">
    <div id="ball"></div>
  </div>

  <audio id="bounceSound">
    <source src="bounce.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <script>
    const square = document.getElementById('square');
    const ball = document.getElementById('ball');
    const bounceSound = document.getElementById('bounceSound');
    const trailContainer = document.createElement('div');
    trailContainer.id = 'trail-container';
    square.appendChild(trailContainer);

    let x = 0;
    let y = 0;
    let speed = 2;
    let angle = Math.random() * Math.PI * 2;
    let hue = 0;
    let trailLength = 10;
    let frameCounter = 0;

    function updatePosition() {
      x += speed * Math.cos(angle);
      y += speed * Math.sin(angle);

      if (x + ball.offsetWidth >= square.offsetWidth || x <= 0) {
        angle = Math.PI - angle; // Bounce horizontally
        playBounceSound();
        updateColor();
      }

      if (y + ball.offsetHeight >= square.offsetHeight || y <= 0) {
        angle = -angle; // Bounce vertically
        playBounceSound();
        updateColor();
      }

      ball.style.transform = `translate(${x}px, ${y}px)`;
      ball.style.backgroundColor = `hsl(${hue}, 100%, 50%)`;

      frameCounter++;
      if (frameCounter % 3 === 0) {
        updateTrail();
      }
    }

    function playBounceSound() {
      bounceSound.currentTime = 0;
      bounceSound.play();
    }

    function updateColor() {
      hue = (hue + 30) % 360; // Increment the hue (change this value for different speed)
    }

    function updateTrail() {
      const trail = document.createElement('div');
      trail.className = 'trail';
      trail.style.transform = `translate(${x}px, ${y}px)`;
      trail.style.backgroundColor = `hsl(${hue}, 100%, 50%)`;
      trailContainer.appendChild(trail);

      if (trailContainer.children.length > trailLength) {
        trailContainer.removeChild(trailContainer.children[0]);
      }
    }

    function animate() {
      updatePosition();
      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
